<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Content for <%= countryName %> | Robolution Admin</title>
  <link rel="shortcut icon" href="/images/ROBOLUTION_ICON.ico" type="image/x-icon">
  <link rel="stylesheet" href="/css/admin.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    :root {
      --primary-color: #00008b;
      --primary-light: #1a1a9e;
      --text-light: #f8f9fa;
      --text-dark: #343a40;
      --bg-gray: #f8f9fa;
      --border-color: #dee2e6;
      --sidebar-width: 250px;
    }
    body { font-family: 'Segoe UI', sans-serif; background-color: var(--bg-gray); color: var(--text-dark); margin: 0; }
    .dashboard-container { display: flex; min-height: 100vh; }
    .sidebar { width: var(--sidebar-width); background-color: var(--primary-color); color: var(--text-light); position: fixed; top: 0; left: 0; height: 100vh; overflow-y: auto; z-index: 1000; }
    .main-content { flex: 1; margin-left: var(--sidebar-width); padding: 20px; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
    .header-title { font-size: 1.8rem; font-weight: 600; }
    .btn { padding: 10px 20px; border-radius: 4px; text-decoration: none; font-weight: 500; cursor: pointer; border: none; }
    .btn-primary { background-color: var(--primary-color); color: white; }
    .btn-secondary { background-color: #6c757d; color: white; }
    .btn-danger { background-color: #dc3545; color: white; }
    .btn-warning { background-color: #ffc107; color: black; }
    .message { padding: 15px; margin-bottom: 20px; border-radius: 4px; }
    .success { background-color: #d4edda; color: #155724; }
    .error { background-color: #f8d7da; color: #721c24; }
    .content-management-container { background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .form-section { margin-bottom: 40px; }
    .section-title { font-size: 1.5rem; margin-bottom: 20px; color: var(--primary-color); border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
    .form-group { margin-bottom: 15px; }
    .form-label { display: block; margin-bottom: 8px; font-weight: 500; }
    .form-control { width: 100%; padding: 10px; border-radius: 4px; border: 1px solid var(--border-color); }
    .content-list { list-style: none; padding: 0; }
    .content-item { display: flex; align-items: center; justify-content: space-between; padding: 15px; border: 1px solid var(--border-color); border-radius: 4px; margin-bottom: 10px; }
    .content-item-content { display: flex; align-items: center; gap: 15px; }
    .content-item-image { width: 80px; height: 80px; object-fit: cover; border-radius: 4px; }
    .content-item-actions { display: flex; gap: 10px; }
    
    /* Tab styling */
    .tabs {
      display: flex;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 25px;
    }
    .tab-button {
      padding: 12px 20px;
      background: none;
      border: none;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      color: var(--text-dark);
      border-bottom: 3px solid transparent;
    }
    .tab-button.active {
      color: var(--primary-color);
      border-bottom-color: var(--primary-color);
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
  </style>
</head>
<body>
<div class="dashboard-container">
  <aside class="sidebar" id="sidebar">
    <!-- Sidebar content from other pages -->
  </aside>
  <main class="main-content" id="main-content">
    <div class="header">
        <h1 class="header-title">Manage Content for <%= countryName %></h1>
        <a href="/country" class="btn btn-secondary">Back to Country List</a>
    </div>

    <% if (successMessage && successMessage.length > 0) { %>
      <div class="message success"><%= successMessage %></div>
    <% } %>
    <% if (errorMessage && errorMessage.length > 0) { %>
      <div class="message error"><%= errorMessage %></div>
    <% } %>

    <div class="content-management-container">
        <!-- Content Type Tabs -->
        <div class="tabs">
          <button class="tab-button active" data-tab="news">News</button>
          <button class="tab-button" data-tab="events">Events</button>
          <button class="tab-button" data-tab="webinars">Webinars</button>
        </div>

        <!-- News Tab -->
        <div id="news-tab" class="tab-content active">
            <!-- Add News Form -->
            <div class="form-section">
                <h2 class="section-title">Add New News Item</h2>
                <form action="/country/<%= slug %>/news/add" method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="newsTitle" class="form-label">Title</label>
                        <input type="text" id="newsTitle" name="title" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="newsDate" class="form-label">Date</label>
                        <input type="date" id="newsDate" name="date" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="newsLink" class="form-label">Link URL</label>
                        <input type="url" id="newsLink" name="link" class="form-control" placeholder="https://example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="newsImage" class="form-label">Image</label>
                        <input type="file" id="newsImage" name="newsImage" class="form-control" accept="image/*" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Add News</button>
                </form>
            </div>

            <!-- Existing News List -->
            <div class="form-section">
                <h2 class="section-title">Existing News</h2>
                <ul class="content-list">
                    <% if (newsItems && newsItems.length > 0) { %>
                        <% newsItems.forEach((item, index) => { %>
                            <li class="content-item">
                                <div class="content-item-content">
                                    <img src="<%= item.NewsCard.image %>" alt="<%= item.NewsCard.title %>" class="content-item-image">
                                    <div>
                                        <strong><%= item.NewsCard.title %></strong><br>
                                        <small><%= new Date(item.NewsCard.date).toLocaleDateString() %></small>
                                    </div>
                                </div>
                                <div class="content-item-actions">
                                    <button class="btn btn-warning btn-sm" onclick="alert('Edit functionality to be implemented.')">Edit</button>
                                    <form action="/country/<%= slug %>/news/delete/<%= item.id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this news item?');">
                                        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                    </form>
                                </div>
                            </li>
                        <% }); %>
                    <% } else { %>
                        <p>No news items found.</p>
                    <% } %>
                </ul>
            </div>
        </div>

        <!-- Events Tab -->
        <div id="events-tab" class="tab-content">
            <!-- Add Event Form -->
            <div class="form-section">
                <h2 class="section-title">Add New Event</h2>
                <form action="/country/<%= slug %>/events/add" method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="eventTitle" class="form-label">Title</label>
                        <input type="text" id="eventTitle" name="title" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="eventDescription" class="form-label">Description</label>
                        <textarea id="eventDescription" name="description" class="form-control" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="eventDate" class="form-label">Date</label>
                        <input type="date" id="eventDate" name="date" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="eventLocation" class="form-label">Location</label>
                        <input type="text" id="eventLocation" name="location" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="eventImage" class="form-label">Banner Image</label>
                        <input type="file" id="eventImage" name="eventImage" class="form-control" accept="image/*" required>
                    </div>
                    <div class="form-group">
                        <label for="eventRegistrationLink" class="form-label">Registration Link</label>
                        <input type="url" id="eventRegistrationLink" name="registrationLink" class="form-control" placeholder="https://example.com/register">
                    </div>
                    <button type="submit" class="btn btn-primary">Add Event</button>
                </form>
            </div>

            <!-- Existing Events List -->
            <div class="form-section">
                <h2 class="section-title">Existing Events</h2>
                <ul class="content-list">
                    <% if (events && events.length > 0) { %>
                        <% events.forEach((item, index) => { %>
                            <li class="content-item">
                                <div class="content-item-content">
                                    <img src="<%= item.bannerImage %>" alt="<%= item.title %>" class="content-item-image">
                                    <div>
                                        <strong><%= item.title %></strong><br>
                                        <small><%= new Date(item.date).toLocaleDateString() %> | <%= item.location %></small>
                                    </div>
                                </div>
                                <div class="content-item-actions">
                                    <button class="btn btn-warning btn-sm" onclick="alert('Edit functionality to be implemented.')">Edit</button>
                                    <form action="/country/<%= slug %>/events/delete/<%= item.id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this event?');">
                                        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                    </form>
                                </div>
                            </li>
                        <% }); %>
                    <% } else { %>
                        <p>No events found.</p>
                    <% } %>
                </ul>
            </div>
        </div>

        <!-- Webinars Tab -->
        <div id="webinars-tab" class="tab-content">
            <!-- Add Webinar Form -->
            <div class="form-section">
                <h2 class="section-title">Add New Webinar</h2>
                <form action="/country/<%= slug %>/webinars/add" method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="webinarTitle" class="form-label">Title</label>
                        <input type="text" id="webinarTitle" name="title" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="webinarDescription" class="form-label">Description</label>
                        <textarea id="webinarDescription" name="description" class="form-control" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="webinarDate" class="form-label">Date</label>
                        <input type="date" id="webinarDate" name="date" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="webinarImage" class="form-label">Banner Image</label>
                        <input type="file" id="webinarImage" name="webinarImage" class="form-control" accept="image/*" required>
                    </div>
                    <div class="form-group">
                        <label for="webinarRegistrationLink" class="form-label">Registration Link</label>
                        <input type="url" id="webinarRegistrationLink" name="registrationLink" class="form-control" placeholder="https://example.com/register">
                    </div>
                    <button type="submit" class="btn btn-primary">Add Webinar</button>
                </form>
            </div>

            <!-- Existing Webinars List -->
            <div class="form-section">
                <h2 class="section-title">Existing Webinars</h2>
                <ul class="content-list">
                    <% if (webinars && webinars.length > 0) { %>
                        <% webinars.forEach((item, index) => { %>
                            <li class="content-item">
                                <div class="content-item-content">
                                    <img src="<%= item.bannerImage %>" alt="<%= item.title %>" class="content-item-image">
                                    <div>
                                        <strong><%= item.title %></strong><br>
                                        <small><%= new Date(item.date).toLocaleDateString() %></small>
                                    </div>
                                </div>
                                <div class="content-item-actions">
                                    <button class="btn btn-warning btn-sm" onclick="alert('Edit functionality to be implemented.')">Edit</button>
                                    <form action="/country/<%= slug %>/webinars/delete/<%= item.id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this webinar?');">
                                        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                    </form>
                                </div>
                            </li>
                        <% }); %>
                    <% } else { %>
                        <p>No webinars found.</p>
                    <% } %>
                </ul>
            </div>
        </div>
    </div>
  </main>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            const tabId = button.dataset.tab;
            
            // Deactivate all tabs
            tabButtons.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Activate clicked tab
            button.classList.add('active');
            document.getElementById(`${tabId}-tab`).classList.add('active');
        });
    });
});
</script>
</body>
</html> 