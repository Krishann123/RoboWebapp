---
const { content } = Astro.props;
const {
    background = "bg-gray-800",
    title = "Frequently Asked Questions",
    subtitle,
    items = [],
} = content || {};
---

<style>
    @keyframes fadeInUp {
        0% {
            opacity: 0;
            transform: translateY(40px);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }
    .faq-animate {
        opacity: 0;
    }
    .faq-animate.visible {
        opacity: 1;
        animation: fadeInUp 0.8s cubic-bezier(0.4, 2, 0.6, 1) forwards;
    }
</style>

<script type="module" is:inline>
    const observer = new IntersectionObserver(
        (entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("visible");
                    observer.unobserve(entry.target);
                }
            });
        },
        { threshold: 0.2 }
    );

    document.addEventListener("DOMContentLoaded", () => {
        document
            .querySelectorAll(".faq-animate")
            .forEach((el) => observer.observe(el));
    });
</script>

<div class:list={["p-10", background]}>
    <div class="text-center mb-12">
        <h3
            class="mb-4 text-5xl lg:text-[56px] font-bebas tracking-wider text-white"
        >
            {title}
        </h3>
        {
            subtitle && (
                <h5 class="text-white text-xs lg:text-base font-roboto">
                    {subtitle}
                </h5>
            )
        }
    </div>

    <div class="flex flex-col space-y-4 items-center max-w-4xl mx-auto">
        {
            items.map((faq) => (
                <details class="w-full group [&_summary::-webkit-details-marker]:hidden">
                    <summary class="flex cursor-pointer items-center justify-between gap-1.5 rounded-lg bg-gray-50 p-4 text-gray-900">
                        <h2 class="font-medium text-left">{faq.question}</h2>

                        <svg
                            class="size-5 shrink-0 transition duration-300 group-open:-rotate-180"
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                            />
                        </svg>
                    </summary>

                    <p class="mt-4 px-4 leading-relaxed text-gray-100 text-left">
                        {faq.answer}
                    </p>
                </details>
            ))
        }
    </div>
</div>
