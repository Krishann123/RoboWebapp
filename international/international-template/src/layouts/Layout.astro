---
import "../styles/global.css";
import { getCountryInfo } from "../lib/country-context";

const { title } = Astro.props;

// Get country information
const countryInfo = getCountryInfo();
const { name: countryName, customStyles } = countryInfo;

// Site title
const siteTitle = title ? `${title} | Robolution ${countryName}` : `Robolution ${countryName}`;

// Base path for country-specific routes
const basePath = import.meta.env.BASE_URL || `/${countryInfo.slug}`;

// Global site path utilities
const sitePathScript = `
window.sitePath = {
  base: "${basePath}",
  asset: (path) => "${basePath}" + (path.startsWith('/') ? path : '/' + path),
  page: (path) => "${basePath}" + (path.startsWith('/') ? path : '/' + path)
};
window.countryInfo = ${JSON.stringify(countryInfo)};
`;

// Inline script to apply country-specific styles
const countryStylesScript = `
document.addEventListener('DOMContentLoaded', function() {
  const styles = ${JSON.stringify(customStyles)};
  
  // Apply styles to CSS variables
  document.documentElement.style.setProperty('--primary-color', styles.primaryColor);
  document.documentElement.style.setProperty('--secondary-color', styles.secondaryColor);
  document.documentElement.style.setProperty('--accent-color', styles.accentColor);
  document.documentElement.style.setProperty('--text-color', styles.textColor || '#333333');
  document.documentElement.style.setProperty('--background-color', styles.backgroundColor || '#FFFFFF');
});
`;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={`Robolution International - ${countryName}`} />
    <meta name="country-site" content={JSON.stringify(countryInfo)} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{siteTitle}</title>
    
    <!-- Global site paths -->
    <script set:html={sitePathScript} />
    
    <!-- Country-specific styles -->
    <script set:html={countryStylesScript} />
    
    <!-- Flowbite CSS for UI components -->
    <link href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css" rel="stylesheet" />
    
    <!-- Font Awesome icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  </head>
  
  <body>
    <header>
      <!-- Placeholder for the navigation component -->
      <slot name="nav" />
    </header>
    
    <main>
      <!-- Main content -->
      <slot />
    </main>
    
    <footer>
      <!-- Placeholder for the footer component -->
      <slot name="footer" />
    </footer>
    
    <!-- Flowbite JS for UI components -->
    <script is:inline src="https://cdn.jsdelivr.net/npm/flowbite@3.0.0/dist/flowbite.min.js"></script>
  </body>
</html>

<style is:global>
  :root {
    --primary-color: #00008b;
    --secondary-color: #FFB366;
    --accent-color: #6AAAFF;
    --text-color: #333333;
    --background-color: #FFFFFF;
  }
  
  html, body {
    margin: 0;
    padding: 0;
    font-family: 'Roboto', sans-serif;
    color: var(--text-color);
    background-color: var(--background-color);
  }
  
  main {
    min-height: calc(100vh - 200px);
  }
</style> 